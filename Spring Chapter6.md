# Spring_190527

> ## Chapter6_AOP

#### `트랜잭션 경계설정 코드 분리의 장점`

1. 비즈니스 로직에 해당하는 클래스의 완전한 독립

   1.1 JDBC or 트랜잭션 추상화 API 불필요

   1.2 DI를 이용해 트랜잭션 기능을 담당하는 클래스가 선행되도록 조치

   1.3 가독성 향상 및 에러 발생 저감

2. 비즈니스 로직에 대한 테스트 용이

#### `프록시`

* 클라이언트가 사용하고자 하는 실제 대상인 것처럼 위장하여

  클라이언트의 요청을 받아주는 것

* 프록시 통해 최종적으로 요청 위임 받아 처리하는 실제 오브젝트 = 타깃

* 프록시의 사용 목적

  1. 클라이언트가 타깃에 접근하는 방법 제어
  2. 타깃에 부가 기능 추가

* 데코레이터 패턴

  * 인터페이스를 통해 위임하는 방식으로 구성하기에 따라

    여러개의 데코레이터를 동시 적용할 수 있음

* 프록시 패턴

  * 프록시 사용 방법 중 타깃에 대한 접근 바업 제어 목적 추구
  * 실제 타깃 오브젝트 넘겨주는 대신 프록시의 메소드를 통해 접근
  * 인터페이스로 위임 시, 타깃과의 사이에 새로운 프록시, 데코레이터 추가 가능

#### `리플렉션`

- 자바의 코드 자체를 추상화해서 접근하도록 만든 것

#### `다이내믹 프록시`

- 프록시 팩토리에 의해 런타임 시 다이내믹하게 만들어지는 오브젝트

- 타깃인 인터페이스의 메소드가 급증할 시,

  매번 코드를 추가할 필요 없이 Handler와 다이내믹 프록시를 통해 처리 가능

  

(어드바이스) 부가기능 제공 오브젝트

(포인트컷) 메소드 선정 알고리즘 담은 오브젝트

- 두가지 모두 프록시에 DI로 주입하여 사용

- 여러 프록시에서 공유 가능

- 스프링의 싱글톤 빈으로 등록 가능

- 구동순서

  1. 클라이언트 요청 to 프록시

  2. 포인트컷에게 부가기능 부여할 메소드인지 확인 요청

  3. MethodInterceptor 타입의 어드바이스 호출(직접 타깃 호출 X)

  4. 부가기능 부여 중 타깃 메소드 호출 필요 시,

     프록시로부터 전달받은 MethodInvocation 타입 콜백 오브젝트의 proceed 호출

#### `AOP 적용 예시`

1. 간단한 메소드 성능 검사 e.g) DB와 연계된 작업 시간 조사
2. 트랜잭션 처리
3. 예외 반환
4. 아키텍처 검증
5. 로깅 / 인증 / 권한 / DB 동기화 등